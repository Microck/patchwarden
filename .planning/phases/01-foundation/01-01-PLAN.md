---
phase: 01-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - pyproject.toml
  - src/mod_sentinel/__init__.py
  - src/mod_sentinel/settings.py
  - src/mod_sentinel/api/__init__.py
  - src/mod_sentinel/api/main.py
  - src/mod_sentinel/api/routes/__init__.py
  - src/mod_sentinel/api/routes/health.py
  - tests/test_health.py
autonomous: true

must_haves:
  truths:
    - "API server starts locally"
    - "GET /health returns 200 with version info"
  artifacts:
    - path: "pyproject.toml"
      provides: "Python dependencies + tooling"
    - path: "src/mod_sentinel/api/main.py"
      provides: "FastAPI app entrypoint"
      exports: ["app"]
  key_links:
    - from: "src/mod_sentinel/api/main.py"
      to: "GET /health"
      via: "router include"
      pattern: "include_router"
---

<objective>
Bootstrap the Python service skeleton (settings + FastAPI app) so later phases can add upload + agents without restructuring.

Purpose: Establish a stable module layout and a verified dev loop.
Output: Runnable FastAPI app with a health endpoint and smoke test.
</objective>

<execution_context>
@/home/ubuntu/.config/opencode/get-shit-done/workflows/execute-plan.md
@/home/ubuntu/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/REQUIREMENTS.md
@.planning/STATE.md
@/home/ubuntu/workspace/ai-dev-days-hackathon/plans/mod-sentinel.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create minimal Python project + settings</name>
  <files>
pyproject.toml
src/mod_sentinel/__init__.py
src/mod_sentinel/settings.py
  </files>
  <action>
Create a Python project using a src-layout package named `mod_sentinel`.

In `pyproject.toml`, include (at minimum) dependencies needed for the roadmap:
- `fastapi`, `uvicorn[standard]`
- `pydantic-settings` (or pydantic v2 settings)
- `python-multipart` (for file upload later)
- `pytest`, `httpx` (for tests)

In `src/mod_sentinel/settings.py`, implement a `Settings` object that reads env vars with safe defaults for local dev.
Avoid hard-requiring external services; later adapters should only activate when env vars exist.
  </action>
  <verify>python3 -c "import mod_sentinel; print('ok')"</verify>
  <done>`mod_sentinel` package imports successfully and settings can be instantiated with no env vars.</done>
</task>

<task type="auto">
  <name>Task 2: FastAPI app entrypoint + health endpoint + smoke test</name>
  <files>
src/mod_sentinel/api/__init__.py
src/mod_sentinel/api/main.py
src/mod_sentinel/api/routes/__init__.py
src/mod_sentinel/api/routes/health.py
tests/test_health.py
  </files>
  <action>
Implement a FastAPI app in `src/mod_sentinel/api/main.py` exporting `app`.

Add `GET /health` in `src/mod_sentinel/api/routes/health.py` returning JSON including:
- `status: "ok"`
- `service: "mod-sentinel"`
- `version` (can be hardcoded for now)

Add a pytest smoke test using FastAPI TestClient (or httpx ASGI) asserting `/health` returns 200 and includes the keys above.
  </action>
  <verify>python3 -m pytest -q</verify>
  <done>Tests pass and `uvicorn mod_sentinel.api.main:app` starts without errors.</done>
</task>

</tasks>

<verification>
- `python3 -m pytest -q` passes
- `uvicorn mod_sentinel.api.main:app --reload` and `curl -s localhost:8000/health` returns status ok
</verification>

<success_criteria>
- Local dev server start is documented in README or printed in SUMMARY
- Health endpoint works (foundation for later API routes)
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-01-SUMMARY.md`
</output>
